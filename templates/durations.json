{
	"from": "{{ schema }}",
	"edges": [{
			"allowNulls": false,
			"domain": {
				"max": "today-1day",
				"interval": "day",
				"type": "time",
				"min": "{{ since }}"
			},
			"name": "date",
			"value": "result.end_time"
		}
	],
	"select": [{
			"aggregate": "cardinality",
			"name": "distinct",
			"value": "{{ test_id }}"
		},
		{
			"aggregate": "count",
			"name": "total"
		},
		{
			"name": "elapsed",
			"aggregate": "percentile",
			"percentile": 0.9,
			"value": {
				"sub": ["run.stats.end_time", "run.stats.start_time"]
			}
		}
	],
	"where": {
		"and": [
			{% for expression in when %}
				{{ expression|tojson }},
			{% endfor %}
			{
				"gt": {
					"run.stats.start_time": {
						"date": "{{ since }}"
					}
				}
			}
		]
	},
	"format": "table",
	"limit": {{ limit }}
}
